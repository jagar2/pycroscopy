

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Load Dataset &mdash; pycroscopy 0.56.01 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="pycroscopy 0.56.01 documentation" href="../index.html"/>
        <link rel="up" title="Pycroscopy Gallery" href="index.html"/>
        <link rel="next" title="Tutorial 4: Parallel Computing" href="tutorial_04_parallel_computing.html"/>
        <link rel="prev" title="Writing to hdf5 using the Microdata objects" href="microdata_example.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> pycroscopy
          

          
          </a>

          
            
            
              <div class="version">
                0.56
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Data_Format.html">Pycroscopy Data and File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pycroscopy.html">pycroscopy package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Pycroscopy Gallery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="microdata_example.html">Writing to hdf5 using the Microdata objects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Load Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_04_parallel_computing.html">Tutorial 4: Parallel Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_01_translator.html">Tutorial 1: Data Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_spectral_unmixing.html">Spectral Unmixing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_05_data_processing.html">Tutorial 5: Formalizing Data Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_02_writing_to_h5.html">Tutorial 2: Writing to pycroscopy H5 files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_03_multidimensional_data.html">Tutorial 3: Handling Multidimensional datasets</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pycroscopy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Pycroscopy Gallery</a> &raquo;</li>
        
      <li>Load Dataset</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/auto_examples/load_dataset_example.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="load-dataset">
<span id="sphx-glr-auto-examples-load-dataset-example-py"></span><h1>Load Dataset<a class="headerlink" href="#load-dataset" title="Permalink to this headline">¶</a></h1>
<p>Conventionally, the h5py package is used to create, read, write, and modify h5 files.</p>
<p>Pycroscopy uses h5py to read hdf5 files and the ioHDF5 subpackage (a light wrapper around h5py) within pycroscopy
to create / write back to the file. Please see the example on writing hdf5 files for more information on creating and
writing to h5 files using pycroscopy.</p>
<p>In the event that modification / addition of data to the existing file is of interest,
it is recommended that the file be opened using ioHDF5. The same h5py handles can be obtained easily from ioHDF5.
Note that ioHDF5 always reads the files in the ‘r+’ mode that allows modification of the file.</p>
<p>In this example, we will be loading the Raw_Data dataset from the hdf5 file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Code source: pycroscopy</span>
<span class="c1"># Liscense: MIT</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># This package is not part of anaconda and may need to be installed.</span>
    <span class="kn">import</span> <span class="nn">wget</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pip</span>
    <span class="n">pip</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;install&#39;</span><span class="p">,</span> <span class="s1">&#39;wget&#39;</span><span class="p">])</span>
    <span class="kn">import</span> <span class="nn">wget</span>

<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">remove</span>
<span class="kn">import</span> <span class="nn">pycroscopy</span> <span class="kn">as</span> <span class="nn">px</span>

<span class="c1"># Downloading the file from the pycroscopy Github project</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/pycroscopy/pycroscopy/master/data/BELine_0004.h5&#39;</span>
<span class="n">h5_path</span> <span class="o">=</span> <span class="s1">&#39;temp.h5&#39;</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">wget</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">h5_path</span><span class="p">)</span>

<span class="c1"># h5_path = px.io_utils.uiGetFile(caption=&#39;Select .h5 file&#39;, filter=&#39;HDF5 file (*.h5)&#39;)</span>

<span class="c1"># Read the file using using h5py:</span>
<span class="n">h5_file1</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">h5_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="c1"># Look at the contents of the file:</span>
<span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">print_tree</span><span class="p">(</span><span class="n">h5_file1</span><span class="p">)</span>

<span class="c1"># Access the &quot;Raw_Data&quot; dataset from its absolute path</span>
<span class="n">h5_raw1</span> <span class="o">=</span> <span class="n">h5_file1</span><span class="p">[</span><span class="s1">&#39;Measurement_000/Channel_000/Raw_Data&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;h5_raw1: &#39;</span><span class="p">,</span> <span class="n">h5_raw1</span><span class="p">)</span>

<span class="c1"># We can get to the same dataset through relative paths:</span>

<span class="c1"># Access the Measurement_000 group first</span>
<span class="n">h5_meas_grp</span> <span class="o">=</span> <span class="n">h5_file1</span><span class="p">[</span><span class="s1">&#39;Measurement_000&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;h5_meas_grp:&#39;</span><span class="p">,</span> <span class="n">h5_meas_grp</span><span class="p">)</span>

<span class="c1"># Now we can access the &quot;Channel_000&quot; group via the h5_meas_grp object</span>
<span class="n">h5_chan_grp</span> <span class="o">=</span> <span class="n">h5_meas_grp</span><span class="p">[</span><span class="s1">&#39;Channel_000&#39;</span><span class="p">]</span>

<span class="c1"># And finally, the same raw dataset can be accessed as:</span>
<span class="n">h5_raw1_alias_1</span> <span class="o">=</span> <span class="n">h5_chan_grp</span><span class="p">[</span><span class="s1">&#39;Raw_Data&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;h5_raw1_alias_1:&#39;</span><span class="p">,</span> <span class="n">h5_raw1_alias_1</span><span class="p">)</span>

<span class="c1"># Another way to get this dataset is via functions written in pycroscopy:</span>
<span class="n">h5_dsets</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">getDataSet</span><span class="p">(</span><span class="n">h5_file1</span><span class="p">,</span> <span class="s1">&#39;Raw_Data&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;h5_dsets:&#39;</span><span class="p">,</span> <span class="n">h5_dsets</span><span class="p">)</span>

<span class="c1"># In this case, there is only a single Raw_Data, so we an access it simply as:</span>
<span class="n">h5_raw1_alias_2</span> <span class="o">=</span> <span class="n">h5_dsets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;h5_raw1_alias_2:&#39;</span><span class="p">,</span> <span class="n">h5_raw1_alias_2</span><span class="p">)</span>

<span class="c1"># Let&#39;s just check to see if these are indeed aliases of the same dataset:</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;All aliases of the same dataset?&#39;</span><span class="p">,</span> <span class="n">h5_raw1</span> <span class="o">==</span> <span class="n">h5_raw1_alias_1</span> <span class="ow">and</span> <span class="n">h5_raw1</span> <span class="o">==</span> <span class="n">h5_raw1_alias_2</span><span class="p">)</span>

<span class="c1"># Let&#39;s close this file</span>
<span class="n">h5_file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Load the dataset with pycroscopy</span>
<span class="n">hdf</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">ioHDF5</span><span class="p">(</span><span class="n">h5_path</span><span class="p">)</span>

<span class="c1"># Getting the same h5py handle to the file:</span>
<span class="n">h5_file2</span> <span class="o">=</span> <span class="n">hdf</span><span class="o">.</span><span class="n">file</span>

<span class="n">h5_raw2</span> <span class="o">=</span> <span class="n">h5_file2</span><span class="p">[</span><span class="s1">&#39;Measurement_000/Channel_000/Raw_Data&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;h5_raw2:&#39;</span><span class="p">,</span> <span class="n">h5_raw2</span><span class="p">)</span>

<span class="n">h5_file2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Delete the temporarily downloaded h5 file:</span>
<span class="n">remove</span><span class="p">(</span><span class="n">h5_path</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/load_dataset_example.py" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">load_dataset_example.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/load_dataset_example.ipynb" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">load_dataset_example.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Generated by Sphinx-Gallery</a></p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial_04_parallel_computing.html" class="btn btn-neutral float-right" title="Tutorial 4: Parallel Computing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="microdata_example.html" class="btn btn-neutral" title="Writing to hdf5 using the Microdata objects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Numan Laanait, Suhas Somnath, Chris Smith.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.56.01',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>